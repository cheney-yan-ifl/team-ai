# Product Requirements Document (PRD)

## Project: Slack‑Like Multi‑Agent AI Chat Application

## Version: Draft v0.1

---

## 1. Overview

### 1.1 User Interface (UI) Overview

The application follows a **Slack-inspired three‑pane layout** optimized for multi‑agent AI collaboration. The UI supports fast navigation, clear agent awareness, and seamless state‑driven interactions.

**Primary UI Regions:**

1. **Left Sidebar (Navigation Panel)**

   * **Topic List:** Displays all conversation threads. Each topic shows title, icons for active agents, unread markers, and session status indicators.
   * **Agent List:** Shows available agents (primary + observer types) with role badges. Agents can be dragged or selected to invite into a topic.
   * **User List (optional):** For multi-user collaboration, shows members currently in the workspace.
   * Collapsible for narrow screens.

2. **Secondary Sidebar (Context Panel)**

   * Shows **session metadata**, **state information**, and **active tools** triggered by the state-reaction engine.
   * Hosts UI components such as:

     * State snapshot view
     * Agent workflow steps
     * Tools panel (files, tasks, actions)
     * Agent suggestions or critiques

3. **Main Chat Window**

   * Central conversation area with:

     * User messages
     * Primary agent responses
     * Observer agent feedback (styled differently)
   * Threaded or linear mode depending on topic type
   * Shows state-change events inline when triggered by tools or agents
   * Input composer with support for:

     * Mentions (`@agent`, `@user`)
     * File uploads
     * Slash commands (`/action`, `/set_state`)
     * Quick actions relevant to the state tool

4. **Top Bar (Global Navigation)**

   * Workspace title
   * Global settings
   * Agent management
   * Access to system-wide tools (logs, analytics, templates)

5. **Bottom Composer Area**

   * Rich-text message composer with autocomplete
   * Buttons for inviting agents, triggering workflows, or applying state changes
   * Session-state preview (optional)

This UI structure lays the foundation for a predictable and powerful user journey, addressed in later sections of the PRD.

### 1.2 Text-Based UI Demonstration

Below is a simplified ASCII-style mockup showing the general layout of the application:

```
+--------------------------------------------------------------------------------+
| Workspace Name                                                 [Settings] [AI] |
+--------------------------------------------------------------------------------+
| Topics / Agents / Users | Session Context Panel              | Main Chat      |
|--------------------------|-----------------------------------|-----------------|
|  • Topic A               |  Session: Topic A                 |  [User] Hello! |
|    - Agent: Alpha (P)    |  State: Draft → Reviewing         |                 |
|    - Agent: Critic (O)   |  Workflow: Step 1/4               | [Alpha] Hi!     |
|                          |                                   |                 |
|  • Topic B               |  Active Agents:                   | [Critic]        |
|  • Topic C               |    - Alpha (Primary)              | Observing...    |
|                          |    - Critic (Observer)            |                 |
|--------------------------|-----------------------------------|-----------------|
|  Agents                  | Tools:                            |  Message Input  |
|  - Alpha (Primary)       |  - Files                          |  > @Alpha pls   |
|  - Critic (Observer)     |  - Tasks                          |    summarize    |
|  - Planner (Observer)    |  - State Inspector                |                 |
+--------------------------------------------------------------------------------+
```

**Legend:**

* **Left Panel:** Navigation for Topics, Agents, Users
* **Middle Panel:** Context + State + Tools driven by the session-reaction engine
* **Right Panel:** Main chat with primary + observer agent messages
* **Bottom Area:** Input bar with mentions, commands, file uploads

```
This project is a **Slack‑style chat interface** designed specifically for **interacting with multiple AI agents**. Users can navigate topics, invite agents, and collaborate with AI in a structured workspace. The system also integrates a **state‑based reaction/response tool** (provided by the user) to help agents and the system update and respond based on session state changes.

The goal is to provide a familiar chat experience while enabling powerful AI‑driven workflows, with one *primary agent* doing the main task and additional *observer agents* offering monitoring, critique, and feedback.

---

## 2. Core Use Cases
1. **User engages with a topic (channel) to chat with the primary AI agent.**
2. **User invites additional agents** to observe or contribute.
3. **Agents update and react to a shared session state** using the provided tool.
4. **User switches between agents, topics, and sessions** using a Slack‑like left‑side navigation.
5. **Agents coordinate, provide suggestions, or monitor progress** in a multi‑agent workspace.

---

## 3. Key Features
### 3.1 Slack‑Like Layout
- **Left sidebar** with:
  - User list (optional)
  - Agent list
  - Topic list (conversation threads)
- **Main chat area** with:
  - Message history
  - AI agent responses
  - Multi‑agent commentary/monitoring

### 3.2 Multi‑Agent Workflow
- One **primary agent** per topic
- Additional **observer agents** that:
  - Monitor the conversation
  - Provide suggestions
  - Trigger reactions based on status updates
  - Are optional depending on topic

### 3.3 Structured “Session State” System
- Integrated with external **status‑based reaction/response tool**
- Each conversation maintains a **session‑level state object**
- Agents and user actions trigger **state changes**, which then prompt:
  - Automated agent reactions
  - Workflow steps
  - UI updates

### 3.4 Topic & Session Management
- Users can create new topics
- Each topic maintains:
  - Associated agents
  - State
  - Message history
  - Metadata (title, description, purpose)

---

## 4. User Flows
### 4.1 Starting a Conversation
1. User selects an existing topic or creates a new one
2. Default primary agent joins the session
3. User begins messaging
4. State updates occur automatically

### 4.2 Inviting Agents
1. User opens agent list
2. Selects agent to invite
3. Agent joins as observer or contributor
4. State tool triggers new agent behaviors as appropriate

### 4.3 Session State Updates
1. User or agent action triggers state change
2. External tool processes new state
3. Agents respond according to rules
4. UI displays updated state and reactions

---

## 5. Technical Requirements
### 5.1 Frontend
- React/Next.js (recommended)
- Websocket or SSE for live updates
- Slack‑like layout components
- Message composer + agent controls

### 5.2 Backend
- Session manager
- Multi‑agent orchestration engine
- Integration layer for the **state‑reaction tool**
- Storage for:
  - Sessions
  - States
  - Messages
  - User and agent metadata

### 5.3 Agent Behavior
- Primary agent handles execution
- Observer agents:
  - Listen for state events
  - Provide feedback or improvements
  - Use configurable behavior roles

---

## 6. Integration With Status‑Reaction Tool
(To be expanded once the link and details are provided.)

Planned integration points:
- State schema mapping
- Trigger events
- Agent response pipeline
- UI feedback hooks

---

## 7. Initial Open Questions
1. What is the exact structure and API of the state‑based reaction tool?
2. How will topics be persisted and organized?
3. How many agents will be active in a typical session?
4. Do observer agents speak in the main chat or in a separate area?
5. Any constraints on latency or performance?

---

## 8. Next Steps
- Clarify external tool details
- Define agent roles and personalities
- Define full session state schema
- Finalize UI wireframes
- Expand PRD sections accordingly

```
