# UI Specification: Main Workspace (Slack-Style)

Expanded from PRD §1.1 to detail the primary Slack-like layout plus the right-side detail panel for agent/state information. Focus here is the main page; additional screens (thread view, agent management, workflow dashboards) will build on this. Simplified for the initial release to introduce fewer concepts.

## Layout Overview (Three-Pane + Top/Bottom Rails)
- **Top Bar:** Workspace name only (keep minimal at start).
- **Left Navigation Pane:** Agents list first, then topic/channels list with unread + status badges; “New Topic” action lives here. Keep other sections hidden for now.
- **Main Chat Column:** Topic intro/banner and message stream for user, primary agent, and observers. Inline state events deferred; thread previews not shown. Thread toggle is a simple “show/hide observer visibility” control.
- **Right Detail Panel (Context/Config):** Current state summary, agent lineup with activity indicators (e.g., “wants to provide feedback”), files/tasks, and timeline. Remove reaction hooks and extra sections for now.
- **Bottom Composer:** Rich text input only (same styling as main chat entries); no additional status lines until needed.

### Layout Overview ASCII (Slack-Style Main Page)
```
+--------------------------------------------------------------------------------+
| Workspace                                                                      |
+-----------------------+-----------------------------------+--------------------+
|   Left Navigation     |            Main Chat              |    Right Detail    |
|  - Agents (P/O)       |  - Topic intro / banner           |  - State snapshot  |
|  - Topics/Channels    |  - Message stream (P/O/User)      |  - Agents lineup   |
|  - New Topic action   |  - Thread toggle (observer vis)   |  - Activity (raise hand)|
|                       |                                   |  - Files/Tasks     |
|                       |                                   |  - Timeline        |
+-----------------------+-----------------------------------+--------------------+
|                                 Bottom Composer (RTE, @mentions, uploads)      |
+--------------------------------------------------------------------------------+
```
### Right Detail Panel (new vs. baseline Slack view)
- **Session State Snapshot:** Status, workflow step, health, blockers, and last update time.
- **Active Agents:** Primary + observers with role badges; inline controls to mute/boost observers or adjust personas/config.
- **State/Reaction Hooks:** Pending triggers from the external state-reaction tool, with “apply/ignore” affordances.
- **Artifacts & Tools:** Files, tasks, actions, and tool runs associated with the topic; quick open/download.
- **Timeline:** Recent events (state transitions, tool executions, agent joins/leaves).
- **Adaptive Behavior:** Collapses to icons on narrow widths; can float over chat on mobile/tablet.

## Main Page User Journey (Happy Path)
1) **Open Workspace:** Default topic loads; left nav shows unread/status; right detail shows session snapshot + active agents.
2) **Review Context:** Intro block in chat summarizes topic purpose; right panel shows current workflow step and blockers.
3) **Invite/Adjust Agents:** From top bar or left agent list, add observers; right panel updates lineup and lets you tune roles/config.
4) **Start Messaging:** User chats with primary agent; mentions observers as needed. State changes or tool results surface inline.
5) **React to State:** When a state event fires, the right panel highlights the trigger; user can confirm actions or let observers respond.
6) **Manage Artifacts:** Files/tasks appear in right panel; users open or pin them; chat references remain linked.
7) **Threading (Optional):** Users can open thread view inline; right panel context stays in sync with the selected message/thread.
8) **Completion:** Primary agent marks status done; right panel locks to read-only summary; observers quiet unless reactivated.

## Interaction Details (Main Workspace)
- **Mentions & Slash Commands:** Fast targeting of agents and state commands from composer; autocomplete uses agent roster + state actions.
- **Agent Differentiation:** Visual styling for observer comments vs. primary replies; system/state events use neutral badges.
- **Presence & Status:** Topic list shows active agents; right panel indicates who is listening/responding.
- **Keyboard & Focus:** Quick switch between topics (left), search (top), and composer; right panel toggles via hotkey.
- **Resize/Collapse:** Left and right panels resizable; both collapsible for focus mode, with badges to indicate hidden activity.

## Upcoming UI Docs (to be added)
- Threaded message details (inline vs. modal)
- Agent management + persona configuration surfaces
- Workflow/state timeline deep-dive and dashboards
- Mobile and narrow-screen adaptations
