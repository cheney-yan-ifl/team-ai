# UI Specification: Main Workspace (Slack-Style)

Expanded from PRD §1.1 to detail the primary Slack-like layout plus the right-side detail panel for agent/state information. Focus here is the main page; additional screens (thread view, agent management, workflow dashboards) will build on this.

## Layout Overview (Three-Pane + Top/Bottom Rails)
- **Top Bar:** Workspace name, global search, settings, agent management, notifications, and quick actions (e.g., “Invite agents”, “Run workflow”).
- **Left Navigation Pane:** Topics/channels with unread + status badges, agent list with roles (Primary/Observer), optional user list, filters (all/unread/starred), and creation affordances.
- **Main Chat Column:** Message stream with primary agent responses, observer commentary, system/state events inline, and thread toggle. Supports pinned topic intro block and contextual banners (e.g., state changes).
- **Right Detail Panel (Context/Config):** Dedicated to per-topic/session details: state snapshot, agent lineup/config, tools, files/tasks, reaction hooks, and activity timeline. Collapsible on smaller screens.
- **Bottom Composer:** Rich text input with mentions (`@agent`, `@user`), slash commands (`/action`, `/set_state`), file uploads, quick actions (invite agent, apply workflow), and a compact state preview badge.

### Layout Overview ASCII (Slack-Style Main Page)
```
+--------------------------------------------------------------------------------+
| Workspace / Search / Settings / Agent Mgmt / Notifications / Quick Actions     |
+-----------------------+-----------------------------------+--------------------+
|   Left Navigation     |            Main Chat              |    Right Detail    |
|  - Topics/Channels    |  - Topic intro / banner           |  - State snapshot  |
|  - Agents (P/O)       |  - Message stream (P/O/User)      |  - Agents lineup   |
|  - Users (optional)   |  - Inline state/tool events       |  - Hooks/actions   |
|  - Filters + new      |  - Thread previews/toggles        |  - Files/Tasks     |
|                       |                                   |  - Timeline        |
+-----------------------+-----------------------------------+--------------------+
|                   Bottom Composer (RTE, @mentions, /slash, uploads, badges)    |
+--------------------------------------------------------------------------------+
```

### ASCII Diagrams

**Layer 2: Primary Rails and Panes**
```
+------------------------------------------------------------------------------+
|                               Top Bar                                        |
+---------------------+-----------------------------------+--------------------+
| Left Navigation     |             Main Chat             |   Right Detail     |
| (Topics/Agents/Users| (Messages, threads, banners)      |   (State/Agents)   |
+---------------------+-----------------------------------+--------------------+
|                                   Bottom Composer (RTE, mentions, slash)     |
+------------------------------------------------------------------------------+
```

**Layer 3: Key Components Inside Each Pane**
```
Top Bar: [Workspace] [Search] [Settings] [Agent Mgmt] [Notifications] [Quick Actions]

Left Navigation:
  - Workspace switcher / filters (all, unread, starred)
  - Topics/channels with unread + status badges
  - Agents list with role badges (Primary/Observer)
  - Users (optional) and Apps

Main Chat:
  - Topic intro banner / purpose
  - Message stream (primary agent, observer agents, user)
  - Inline state events and tool outcomes
  - Thread toggle / per-message thread previews

Right Detail Panel:
  - Session state snapshot (status, step, health, blockers)
  - Active agents with config controls (mute/boost/edit persona)
  - Reaction hooks (pending triggers) with apply/ignore
  - Artifacts & tools (files, tasks, actions, tool runs)
  - Timeline of recent events

Bottom Composer:
  - Rich text editor, @mentions, slash commands (/action, /set_state)
  - Uploads, quick actions (invite agent, apply workflow)
  - Compact state badge/preview
```

### Right Detail Panel (new vs. baseline Slack view)
- **Session State Snapshot:** Status, workflow step, health, blockers, and last update time.
- **Active Agents:** Primary + observers with role badges; inline controls to mute/boost observers or adjust personas/config.
- **State/Reaction Hooks:** Pending triggers from the external state-reaction tool, with “apply/ignore” affordances.
- **Artifacts & Tools:** Files, tasks, actions, and tool runs associated with the topic; quick open/download.
- **Timeline:** Recent events (state transitions, tool executions, agent joins/leaves).
- **Adaptive Behavior:** Collapses to icons on narrow widths; can float over chat on mobile/tablet.

## Main Page User Journey (Happy Path)
1) **Open Workspace:** Default topic loads; left nav shows unread/status; right detail shows session snapshot + active agents.
2) **Review Context:** Intro block in chat summarizes topic purpose; right panel shows current workflow step and blockers.
3) **Invite/Adjust Agents:** From top bar or left agent list, add observers; right panel updates lineup and lets you tune roles/config.
4) **Start Messaging:** User chats with primary agent; mentions observers as needed. State changes or tool results surface inline.
5) **React to State:** When a state event fires, the right panel highlights the trigger; user can confirm actions or let observers respond.
6) **Manage Artifacts:** Files/tasks appear in right panel; users open or pin them; chat references remain linked.
7) **Threading (Optional):** Users can open thread view inline; right panel context stays in sync with the selected message/thread.
8) **Completion:** Primary agent marks status done; right panel locks to read-only summary; observers quiet unless reactivated.

## Interaction Details (Main Workspace)
- **Mentions & Slash Commands:** Fast targeting of agents and state commands from composer; autocomplete uses agent roster + state actions.
- **Agent Differentiation:** Visual styling for observer comments vs. primary replies; system/state events use neutral badges.
- **Presence & Status:** Topic list shows active agents; right panel indicates who is listening/responding.
- **Keyboard & Focus:** Quick switch between topics (left), search (top), and composer; right panel toggles via hotkey.
- **Resize/Collapse:** Left and right panels resizable; both collapsible for focus mode, with badges to indicate hidden activity.

## Upcoming UI Docs (to be added)
- Threaded message details (inline vs. modal)
- Agent management + persona configuration surfaces
- Workflow/state timeline deep-dive and dashboards
- Mobile and narrow-screen adaptations
