# UI Specification: Main Workspace (Slack-Style)

Expanded from PRD §1.1 to detail the primary Slack-like layout plus the right-side detail panel for agent/state information. Focus here is the main page; additional screens (thread view, agent management, workflow dashboards) will build on this. Simplified for the initial release to introduce fewer concepts.

## 1. Layout Overview (Three-Pane + Top Bar)
A. **Top Bar:** Workspace name only (keep minimal at start).
B. **Left Navigation Pane:** Agents list first, then topic/channels list with unread + status badges; “New Topic” action lives here. Keep other sections hidden for now.
C. **Main Chat Column:** Topic intro/banner and message stream for user, primary agent, and observers. Inline state events deferred; thread previews not shown. Thread toggle is a simple “show/hide observer visibility” control. Includes the Bottom Composer (RTE, @mentions, uploads) docked under this column; no additional status lines until needed.
D. **Right Detail Panel (Context/Config):** Current state summary, agent lineup with activity indicators (e.g., “wants to provide feedback”), files/tasks, and timeline. Remove reaction hooks and extra sections for now.

### 1.1 Layout Overview ASCII (Slack-Style Main Page)
```
+--------------------------------------------------------------------------------+
| Workspace                                                                      |
+-----------------------+-----------------------------------+--------------------+
|   Left Navigation     |            Main Chat              |    Right Detail    |
|  - Agents (P/O)       |  - Topic intro / banner           |  - State snapshot  |
|  - Topics/Channels    |  - Message stream (P/O/User)      |  - Agents lineup   |
|  - New Topic action   |  - Thread toggle (observer vis)   |  - Activity badge  |
|                       |                                   |                    |
|                       +-----------------------------------+  - Files/Tasks     |
|                       |  Input (@, /, shortcuts, etc)     |  - Timeline        |
+-----------------------+-----------------------------------+--------------------+
```

## 2. Right Detail Panel (new vs. baseline Slack view)
A. **Session State Snapshot:** A summary of this topic, updated live. There should be a global chat organizer agent running behind the scene. (not visible to the chat -- only used for organizing chats.)
B. **Agents:** Primary + observers with role badges; with action badge indicating they are thinking... has something to say...
C. **File/Tasks** Artifactory of this chat
D. **Artifacts & Tools:** Files, tasks, actions, and tool runs associated with the topic; quick open/download.
E. **Timeline:** Recent events (state transitions, tool executions, agent joins/leaves).
F. **Adaptive Behavior:** Collapses to icons on narrow widths; can float over chat on mobile/tablet.

## 3. Main Page User Journey (Happy Path)
A. **Open Workspace:** Default topic loads; left nav shows unread/status; right detail shows session snapshot + active agents.
B. **Review Context:** Intro block in chat summarizes topic purpose; right panel shows current workflow step and blockers.
C. **Invite/Adjust Agents:** From top bar or left agent list, add observers; right panel updates lineup and lets you tune roles/config.
D. **Start Messaging:** User chats with primary agent; mentions observers as needed. State changes or tool results surface inline.
E. **React to State:** When a state event fires, the right panel highlights the trigger; user can confirm actions or let observers respond.
F. **Manage Artifacts:** Files/tasks appear in right panel; users open or pin them; chat references remain linked.
G. **Threading (Optional):** Users can open thread view inline; right panel context stays in sync with the selected message/thread.
H. **Completion:** Primary agent marks status done; right panel locks to read-only summary; observers quiet unless reactivated.

## 4. Interaction Details (Main Workspace)
A. **Mentions & Slash Commands:** Fast targeting of agents and state commands from composer; autocomplete uses agent roster + state actions.
B. **Agent Differentiation:** Visual styling for observer comments vs. primary replies; system/state events use neutral badges.
C. **Presence & Status:** Topic list shows active agents; right panel indicates who is listening/responding.
D. **Keyboard & Focus:** Quick switch between topics (left), search (top), and composer; right panel toggles via hotkey.
E. **Resize/Collapse:** Left and right panels resizable; both collapsible for focus mode, with badges to indicate hidden activity.

## 5. Upcoming UI Docs (to be added)
A. Threaded message details (inline vs. modal)
B. Agent management + persona configuration surfaces
C. Workflow/state timeline deep-dive and dashboards
D. Mobile and narrow-screen adaptations
