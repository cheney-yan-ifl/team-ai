# UI Specification: Main Workspace (Slack-Style)

Expanded from PRD §1.1 to detail the primary Slack-like layout plus the right-side detail panel for agent/state information. Focus here is the main page; additional screens (thread view, agent management, workflow dashboards) will build on this. Simplified for the initial release to introduce fewer concepts.

## 1. Layout Overview (Three-Pane + Top/Bottom Rails)
1. **Top Bar:** Workspace name only (keep minimal at start).
2. **Left Navigation Pane:** Agents list first, then topic/channels list with unread + status badges; “New Topic” action lives here. Keep other sections hidden for now.
3. **Main Chat Column:** Topic intro/banner and message stream for user, primary agent, and observers. Inline state events deferred; thread previews not shown. Thread toggle is a simple “show/hide observer visibility” control.
4. **Right Detail Panel (Context/Config):** Current state summary, agent lineup with activity indicators (e.g., “wants to provide feedback”), files/tasks, and timeline. Remove reaction hooks and extra sections for now.

### 1.1 Layout Overview ASCII (Slack-Style Main Page)
```
+--------------------------------------------------------------------------------+
| Workspace                                                                      |
+-----------------------+-----------------------------------+--------------------+
|   Left Navigation     |            Main Chat              |    Right Detail    |
|  - Agents (P/O)       |  - Topic intro / banner           |  - State snapshot  |
|  - Topics/Channels    |  - Message stream (P/O/User)      |  - Agents lineup   |
|  - New Topic action   |  - Thread toggle (observer vis)   |  - Activity (raise hand)|
|                       |                                   |  - Files/Tasks     |
|                       |                                   |  - Timeline        |
+                       +-----------------------------------+--------------------+
|                       |          Bottom Composer (RTE, @mentions, uploads)      |
+--------------------------------------------------------------------------------+
```

### 1.2 Layout Discussion Bullets
1. Top bar stays Workspace-only for now; agree when to reintroduce search/settings.
2. Left nav order: Agents first, then Topics/Channels; “New Topic” button lives here—confirm this default.
3. Thread toggle meaning: simple observer/passive visibility switch—decide default state (on/off).
4. Right panel focus: state snapshot + agent lineup with activity indicators + files/tasks + timeline; hooks/config deferred—align on this scope.
5. Composer matches chat styling; no extra status line until a requirement emerges.

## 2. Right Detail Panel (new vs. baseline Slack view)
1. **Session State Snapshot:** Status, workflow step, health, blockers, and last update time.
2. **Active Agents:** Primary + observers with role badges; inline controls to mute/boost observers or adjust personas/config.
3. **State/Reaction Hooks:** Pending triggers from the external state-reaction tool, with “apply/ignore” affordances.
4. **Artifacts & Tools:** Files, tasks, actions, and tool runs associated with the topic; quick open/download.
5. **Timeline:** Recent events (state transitions, tool executions, agent joins/leaves).
6. **Adaptive Behavior:** Collapses to icons on narrow widths; can float over chat on mobile/tablet.

## 3. Main Page User Journey (Happy Path)
1. **Open Workspace:** Default topic loads; left nav shows unread/status; right detail shows session snapshot + active agents.
2. **Review Context:** Intro block in chat summarizes topic purpose; right panel shows current workflow step and blockers.
3. **Invite/Adjust Agents:** From top bar or left agent list, add observers; right panel updates lineup and lets you tune roles/config.
4. **Start Messaging:** User chats with primary agent; mentions observers as needed. State changes or tool results surface inline.
5. **React to State:** When a state event fires, the right panel highlights the trigger; user can confirm actions or let observers respond.
6. **Manage Artifacts:** Files/tasks appear in right panel; users open or pin them; chat references remain linked.
7. **Threading (Optional):** Users can open thread view inline; right panel context stays in sync with the selected message/thread.
8. **Completion:** Primary agent marks status done; right panel locks to read-only summary; observers quiet unless reactivated.

## 4. Interaction Details (Main Workspace)
1. **Mentions & Slash Commands:** Fast targeting of agents and state commands from composer; autocomplete uses agent roster + state actions.
2. **Agent Differentiation:** Visual styling for observer comments vs. primary replies; system/state events use neutral badges.
3. **Presence & Status:** Topic list shows active agents; right panel indicates who is listening/responding.
4. **Keyboard & Focus:** Quick switch between topics (left), search (top), and composer; right panel toggles via hotkey.
5. **Resize/Collapse:** Left and right panels resizable; both collapsible for focus mode, with badges to indicate hidden activity.

## 5. Upcoming UI Docs (to be added)
1. Threaded message details (inline vs. modal)
2. Agent management + persona configuration surfaces
3. Workflow/state timeline deep-dive and dashboards
4. Mobile and narrow-screen adaptations
